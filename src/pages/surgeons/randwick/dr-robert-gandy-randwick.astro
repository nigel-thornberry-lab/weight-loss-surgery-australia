---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import CredentialsSection from '../../../components/surgeons/CredentialsSection.astro';
import FAQSection from '../../../components/surgeons/FAQSection.astro';
import TeamSection from '../../../components/surgeons/TeamSection.astro';
import HospitalsSection from '../../../components/surgeons/HospitalsSection.astro';
import PricingSection from '../../../components/surgeons/PricingSection.astro';

const surgeon = {
  "name": "Dr Robert Gandy",
  "city": "Randwick",
  "state": "NSW",
  "phone": "+61 2 8599 4360",
  "website": "http://www.keyholesurgeon.com.au/",
  "category": "Gastrointestinal surgeon",
  "google_maps_url": "https://www.google.com/maps/search/?api=1&query=Dr%20Robert%20Gandy&query_place_id=ChIJPf1u0RiyEmsRToAH5sYubG4",
  "years_experience": "10",
  "estimated_procedures": "2000",
  "slug": "dr-robert-gandy-randwick",
  "bio_long": "Dr Robert Gandy is a leading bariatric surgeon in Randwick; NSW; known for significant expertise in weight loss surgery. With a 5.0-star rating from 83+ patient reviews; they've built a reputation for exceptional patient outcomes and comprehensive surgical care. Specializing in gastric sleeve; bypass; and band procedures; Dr Robert Gandy offers personalized treatment plans backed by 10+ years of surgical experience.",
  "surgeon_photo": "http://www.keyholesurgeon.com.au/images/dr-robert-candy-general-surgeon.png",
  "rating": 5,
  "review_count": 83
};
const citySlug = "randwick";
const slug = "dr-robert-gandy-randwick";
const enhanced = {
  "surgeon_name": "Dr Robert Gandy",
  "city": "Randwick",
  "state": "NSW",
  "credentials": {
    "medical_school": "University of Leeds, United Kingdom (MB ChB, 2002)",
    "fellowships": [
      "Royal Australasian College of Surgeons (FRACS)",
      "Australian and New Zealand Hepato-Pancreato-Biliary Association"
    ],
    "professional_memberships": [
      "Royal Australasian College of Surgeons",
      "Australian and New Zealand Hepato-Pancreato-Biliary Association"
    ],
    "special_training": [
      "Masters in Upper GI Surgery, University of Sydney",
      "Minimally invasive (laparoscopic & robotic) surgery"
    ],
    "years_practicing": 20
  },
  "team": {
    "surgeons": [
      {
        "name": "Dr Robert Gandy",
        "role": "Principal Upper GI & Bariatric Surgeon"
      }
    ],
    "team_size": "Solo practice with support staff",
    "has_dietitian": false,
    "has_psychologist": false,
    "has_nurses": true
  },
  "services": {
    "procedures": [
      "Laparoscopic sleeve gastrectomy",
      "Laparoscopic and robotic gastric bypass",
      "Laparoscopic and robotic gallbladder removal",
      "Mesh and mesh-free hernia repair",
      "Laparoscopic hiatus hernia and anti-reflux surgery",
      "Complex liver, pancreatic, and stomach surgery",
      "Diagnostic and therapeutic endoscopy/colonoscopy"
    ],
    "pre_op_program": "Individual consultation and preparation",
    "post_op_program": "Structured follow-up care",
    "follow_up_duration": "As needed",
    "telehealth": false,
    "support_groups": false
  },
  "hospitals": [
    {
      "name": "Prince of Wales Private Hospital",
      "address": "Barker Street, Randwick NSW 2031"
    },
    {
      "name": "Prince of Wales Public Hospital",
      "address": "Barker Street, Randwick NSW 2031"
    },
    {
      "name": "East Sydney Private Hospital",
      "address": "Sydney, NSW"
    },
    {
      "name": "Chris O'Brien Lifehouse",
      "address": "Missenden Road, Camperdown NSW 2050"
    }
  ],
  "pricing": {
    "available": false,
    "gastric_sleeve": "Contact for pricing",
    "gastric_bypass": "Contact for pricing",
    "consultation": "Contact for pricing"
  },
  "unique_features": [
    "Over 90% of procedures are minimally invasive (laparoscopic or robotic)",
    "Special expertise in complex HPB (liver, pancreas, gallbladder) and upper GI cases",
    "Mesh-free hernia repair option for suitable patients",
    "Clinical lecturer at the University of New South Wales",
    "Masters degree in Upper GI Surgery"
  ],
  "faqs": [
    {
      "question": "What procedures does Dr Robert Gandy specialize in?",
      "answer": "Dr Gandy specializes in laparoscopic and robotic weight loss surgery (sleeve gastrectomy, gastric bypass), gallbladder removal, hernia repairs (including mesh-free), anti-reflux surgery, complex liver, pancreas, and stomach surgery, and endoscopy."
    },
    {
      "question": "What are Dr Robert Gandy's qualifications?",
      "answer": "Dr Gandy holds an MB ChB from the University of Leeds, a Masters in Upper GI Surgery from the University of Sydney, and is a Fellow of the Royal Australasian College of Surgeons with post-fellowship training in Hepato-Pancreato-Biliary surgery."
    },
    {
      "question": "Where does Dr Robert Gandy perform surgery?",
      "answer": "Dr Gandy operates at Prince of Wales Private and Public Hospitals in Randwick, East Sydney Private Hospital, and Chris O'Brien Lifehouse in Camperdown."
    }
  ]
};
const seo = {
  "credentials": {
    "medical_school": "University of Leeds, United Kingdom (MB ChB, 2002)",
    "fellowships": [
      "Royal Australasian College of Surgeons (FRACS)",
      "Australian and New Zealand Hepato-Pancreato-Biliary Association"
    ],
    "professional_memberships": [
      "Royal Australasian College of Surgeons",
      "Australian and New Zealand Hepato-Pancreato-Biliary Association"
    ],
    "special_training": [
      "Masters in Upper GI Surgery, University of Sydney",
      "Minimally invasive (laparoscopic & robotic) surgery"
    ],
    "years_practicing": 20
  },
  "faqs": [
    {
      "question": "What is the typical recovery time after laparoscopic sleeve gastrectomy?",
      "answer": "Recovery time for laparoscopic sleeve gastrectomy generally ranges from a few days to a week, depending on individual health and adherence to post-operative care. Most patients can return to normal activities within two weeks."
    },
    {
      "question": "What are the most common risks associated with bariatric surgeries like gastric sleeve and bypass?",
      "answer": "Common risks include bleeding, leaks, and infection. Additionally, long-term risks can include nutrient deficiencies and gastroesophageal reflux disease. Dr. Gandy and his team are experienced in managing these risks and ensuring patient safety."
    },
    {
      "question": "What are the benefits of robotic surgery in bariatric procedures?",
      "answer": "Robotic surgery offers enhanced precision, reduced recovery time, and less post-operative pain compared to traditional methods. It also allows for more complex procedures with better visualization."
    },
    {
      "question": "How does Dr. Robert Gandy's experience and qualifications contribute to patient success?",
      "answer": "Dr. Robert Gandy is a highly experienced bariatric surgeon with extensive training and a strong focus on patient care. His qualifications and years of practice ensure that patients receive the best possible outcomes."
    },
    {
      "question": "What hospitals does Dr. Robert Gandy operate at in Sydney?",
      "answer": "Dr. Gandy operates at several hospitals in Sydney, including Prince of Wales Private Hospital, Prince of Wales Public Hospital, East Sydney Private Hospital, and Chris O'Brien Lifehouse."
    },
    {
      "question": "What is the typical cost of laparoscopic sleeve gastrectomy, and is it covered by insurance?",
      "answer": "The cost of laparoscopic sleeve gastrectomy varies based on individual circumstances and insurance coverage. Many health insurance plans cover part or all of the procedure, but it's best to check with your provider for specific details."
    },
    {
      "question": "How important is pre-operative preparation for bariatric surgery success?",
      "answer": "Pre-operative preparation is crucial for ensuring a safe and successful surgery. This includes dietary changes, stopping smoking, and following any specific instructions from Dr. Gandy's team."
    },
    {
      "question": "What kind of post-operative care can I expect after bariatric surgery?",
      "answer": "Post-operative care involves follow-up appointments, dietary advice, and monitoring for any complications. Dr. Gandy and his team are committed to supporting patients throughout their recovery and beyond."
    },
    {
      "question": "What are the success rates for laparoscopic sleeve gastrectomy and gastric bypass surgeries?",
      "answer": "Both laparoscopic sleeve gastrectomy and gastric bypass surgeries have high success rates, with many patients achieving significant weight loss and improvement in obesity-related health issues. Success is highly dependent on lifestyle changes and adherence to post-operative guidance."
    },
    {
      "question": "How does Dr. Robert Gandy's team support long-term health and lifestyle changes?",
      "answer": "Dr. Gandy's team provides comprehensive support, including dietary counseling and regular follow-ups, to help patients maintain their weight loss and improve overall health over the long term."
    }
  ]
};

// Extract clean name (remove title/role if present)
const cleanName = surgeon.name.split('|')[0].split('-')[0].trim();

const title = `${cleanName} - Bariatric Surgeon ${surgeon.city}, ${surgeon.state}`;
const description = `Top-rated bariatric surgeon in ${surgeon.city} (${surgeon.rating}★, ${surgeon.review_count} reviews). Gastric sleeve, bypass & revision. Serving ${surgeon.state}. Book consultation today.`;
const canonicalUrl = `https://weightlosssurgery.com.au/surgeons/${citySlug}/${slug}`;
---

<BaseLayout title={title} description={description} canonicalUrl={canonicalUrl}>
  <main class="min-h-screen bg-gray-50">
    <nav class="bg-white border-b border-gray-200 py-3">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center space-x-2 text-sm">
          <a href="/" class="text-blue-600 hover:text-blue-800">Home</a>
          <span class="text-gray-400">/</span>
          <a href="/surgeons" class="text-blue-600 hover:text-blue-800">Surgeons</a>
          <span class="text-gray-400">/</span>
          <a href={`/surgeons/${citySlug}`} class="text-blue-600 hover:text-blue-800">{surgeon.city}</a>
          <span class="text-gray-400">/</span>
          <span class="text-gray-700">{surgeon.name}</span>
        </div>
      </div>
    </nav>

    <!-- Hero Section - Clean Compact Layout -->
    <section class="bg-white py-8">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid md:grid-cols-[280px_1fr] gap-8">
          
          <!-- Left Sidebar: Photo + Rating + CTAs -->
          <div class="space-y-4">
            <!-- Surgeon Photo -->
            {surgeon.surgeon_photo ? (
              <img src={surgeon.surgeon_photo} alt={surgeon.name} class="w-full rounded-xl shadow-lg" loading="eager" />
            ) : (
              <div class="bg-gradient-to-br from-blue-600 to-blue-800 rounded-xl shadow-lg aspect-[3/4] flex items-center justify-center">
                <div class="text-center text-white p-6">
                  <svg class="w-20 h-20 mx-auto mb-2" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
                  </svg>
                  <p class="text-xs font-semibold uppercase tracking-wide">Experience</p>
                  <p class="text-xs uppercase tracking-wide">Precision</p>
                  <p class="text-xs uppercase tracking-wide">Results</p>
                </div>
              </div>
            )}

            <!-- Rating Tile -->
            <div class="bg-white rounded-lg p-4 shadow-md border border-gray-200">
              <div class="text-center">
                <p class="text-sm text-gray-600 mb-1">Rating</p>
                {surgeon.rating > 0 ? (
                  <>
                    <div class="flex items-center justify-center gap-1 mb-1">
                      <span class="text-2xl">⭐</span>
                      <span class="text-2xl font-bold text-gray-900">{surgeon.rating}</span>
                    </div>
                    <p class="text-sm text-gray-600">{surgeon.review_count} reviews</p>
                  </>
                ) : (
                  <>
                    <div class="flex items-center justify-center gap-1 mb-1">
                      <span class="text-2xl">⭐</span>
                      <span class="text-lg font-bold text-gray-900">New</span>
                    </div>
                    <p class="text-sm text-gray-600">0 reviews</p>
                  </>
                )}
              </div>
              <div class="mt-3 pt-3 border-t border-gray-200">
                <p class="text-xs text-gray-600 text-center">Experience</p>
                <p class="text-lg font-bold text-gray-900 text-center">{surgeon.years_experience}+ years</p>
              </div>
            </div>

            <!-- CTA Buttons -->
            {surgeon.website && (
              <a href={surgeon.website} target="_blank" rel="noopener" class="block w-full bg-blue-600 text-white text-center px-4 py-3 rounded-lg text-sm font-semibold hover:bg-blue-700 transition-colors shadow-md">
                Visit Website
              </a>
            )}
            {surgeon.google_maps_url && (
              <a href={surgeon.google_maps_url} target="_blank" rel="noopener" class="block w-full bg-green-600 text-white text-center px-4 py-3 rounded-lg text-sm font-semibold hover:bg-green-700 transition-colors shadow-md">
                View on Google Maps
              </a>
            )}
            {surgeon.phone && (
              <a href={`tel:${surgeon.phone}`} class="block w-full bg-gray-800 text-white text-center px-4 py-3 rounded-lg text-sm font-semibold hover:bg-gray-900 transition-colors shadow-md">
                📞 Call Now
              </a>
            )}
          </div>

          <!-- Right: Main Info -->
          <div class="space-y-6">
            <!-- Header -->
            <div>
              <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-2">{cleanName}</h1>
              <p class="text-lg text-gray-600 mb-4">{surgeon.category}</p>
              
              <!-- Info Tiles - Smaller & More Rounded -->
              <div class="grid grid-cols-3 gap-2 mb-4">
                <div class="bg-blue-50 rounded-xl p-2 text-center">
                  <svg class="w-4 h-4 mx-auto mb-0.5 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
                  </svg>
                  <p class="text-[10px] font-semibold text-gray-700">{surgeon.city}, {surgeon.state}</p>
                </div>
                
                <div class="bg-purple-50 rounded-xl p-2 text-center">
                  <svg class="w-4 h-4 mx-auto mb-0.5 text-purple-600" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"/>
                  </svg>
                  <p class="text-[10px] font-semibold text-gray-700">{enhanced.credentials?.fellowships?.[0]?.replace('Royal Australasian College of Surgeons', 'FRACS') || 'MBBS, FRACS'}</p>
                </div>

                <div class="bg-green-50 rounded-xl p-2 text-center">
                  <svg class="w-4 h-4 mx-auto mb-0.5 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/>
                  </svg>
                  <p class="text-[10px] font-semibold text-gray-700">{surgeon.estimated_procedures}+ Procedures</p>
                </div>
              </div>
            </div>

            <!-- About - Enhanced with Specific Details -->
            <div class="bg-gray-50 rounded-lg p-5">
              <h2 class="text-xl font-bold text-gray-900 mb-3">About {cleanName}</h2>
              <p class="text-gray-700 leading-relaxed mb-4">{surgeon.bio_long.replace(surgeon.name, cleanName)}</p>
              
              {enhanced.unique_features && enhanced.unique_features.length > 0 && (
                <div class="mt-4 pt-4 border-t border-gray-300">
                  <h3 class="text-sm font-bold text-gray-900 mb-2">What Sets {cleanName} Apart:</h3>
                  <ul class="space-y-1">
                    {enhanced.unique_features.slice(0, 4).map(feature => (
                      <li class="text-sm text-gray-700 flex items-start gap-2">
                        <svg class="w-4 h-4 text-blue-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                        </svg>
                        <span>{feature}</span>
                      </li>
                    ))}
                  </ul>
                </div>
              )}

              {enhanced.services?.approach && (
                <div class="mt-4 pt-4 border-t border-gray-300">
                  <h3 class="text-sm font-bold text-gray-900 mb-2">Treatment Approach:</h3>
                  <p class="text-sm text-gray-700">{enhanced.services.approach}</p>
                </div>
              )}
            </div>

            <!-- Procedures - With Shaded Background -->
            <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-5 shadow-sm border border-blue-100">
              <h3 class="text-lg font-bold text-gray-900 mb-3">Procedures Offered</h3>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-2">
                <div class="bg-white rounded-lg p-3 flex items-center gap-2 text-gray-700 shadow-sm">
                  <svg class="w-5 h-5 text-blue-600 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                  </svg>
                  <span class="font-semibold text-sm">Gastric Sleeve</span>
                </div>
                <div class="bg-white rounded-lg p-3 flex items-center gap-2 text-gray-700 shadow-sm">
                  <svg class="w-5 h-5 text-blue-600 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                  </svg>
                  <span class="font-semibold text-sm">Gastric Bypass</span>
                </div>
                <div class="bg-white rounded-lg p-3 flex items-center gap-2 text-gray-700 shadow-sm">
                  <svg class="w-5 h-5 text-blue-600 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                  </svg>
                  <span class="font-semibold text-sm">Gastric Band</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Enhanced Content Sections -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div class="space-y-6">
        {enhanced.credentials && <CredentialsSection credentials={enhanced.credentials} />}
        {enhanced.team && <TeamSection team={enhanced.team} />}
        {enhanced.hospitals && <HospitalsSection hospitals={enhanced.hospitals} />}
        {enhanced.pricing && <PricingSection pricing={enhanced.pricing} />}
        {seo.faqs && seo.faqs.length > 0 && <FAQSection faqs={seo.faqs} />}
      </div>
    </div>
  </main>
</BaseLayout>
